<Publish>
	<!--Id must be set in order to update existing mod. it is not required for publishing mod for the first time-->
	<ModId Value="117161" />
	<!--Name of the mod to display to players-->
	<DisplayName Value="Citizen Entity Cleaner" />
	<!--Short description of the mod-->
	<ShortDescription Value="Cleans up abandoned Citizen entities in the game engine." />
	<!--Long description of the mod. Single line or multi line. Supports minimal markdown subset-->
	<!--LongDescription Value="Some saves might have many abandoned Citizen entities leaving behind households, vehicles, and other entities while also decreasing performance. This mod provides a hack to manually clean those up." /-->
	<LongDescription>
# Citizen Entity Cleaner

# Citizen Entity Cleaner

## ⚠️ **WARNING** ⚠️

---

**DO THIS FIRST: BACK UP YOUR SAVE.**  
This mod touches sensitive game components and is a work-around. Use at your own risk.

---


## Problem

Over time in some saves, Citizen and Household entities accumulate to extremely large numbers in Cities Skylines 2, far exceeding your actual population. Some users don't have this bug, but other could have millions of corrupted entities.

## Performance Impact

This entity bloat causes several issues:

- **Significant performance drops** due to massive numbers of HouseholdFindSystem pathfinding queries
- **Citizens stuck** at leisure or shopping destinations, never leaving under any circumstance
- **Cars, etc get abandoned** and permanently occupying parking spots, never being used again
- **General performance degradation** across querying systems

⚠️ **This mod will also:**
- Optional: delete all homeless citizens (only if Options checkbox selected)
- Optional: delete commuters (Options checkbox)
- Delete "Pending" citizens that may be buffered for relocation
- May cause momentary drops in population demand
- May have other long-term consequences not fully understood
- Safe to remove anytime

## What This Mod Does

Deletes any Citizen entities that don't have a PropertyRenter component attached to it. The vanilla game will clean up the households, vehicles, student/patient references, and anything else afterwards.
It is a very simple mod that doesn't conflict with other mods or overwrite vanilla code/systems, so it is relatively safe in that regard.

## Usage

1. **Backup your save file first!**
2. Open mod Options in-game.
3. Click [Refresh Counts] to see current statistics.
4. Select checkbox options as desired.
5. Click [Cleanup Citizens] to clean up entities.
6. Monitor your city for any unexpected behavior and revert to original Saved city if needed.

Note: this mod does not automatically run in the background. It does nothing unless the Cleanup button is selected.


## What is causing the issue?

Not sure. It could be another mod or something introduced in a more recent patch. It seems somewhat related to the homeless and leisure bug fixes with the last two patches, so it may be an unintended bug introducted that only is really noticeable after long periods of simulation time. It's possible using Better Bulldozer on any citizens that are homeless can also put them into this state, making the problem worse. It could also be caused by unreachable, manually plopped buildings.

## Thanks to
yenyang, Konsi, krzychu124, Honu

Feedback / Bug Report: https://discord.com/channels/1024242828114673724/1402078697120469064
	</LongDescription>
	<!--Thumbnail-->
	<Thumbnail Value="Properties/Thumbnail.png" />
	<!--Screenshot, can be set multiple times-->
	<Screenshot Value="Properties/Screenshots/CEC-thumbnail05.png" />
	<Screenshot Value="Properties/Screenshots/before.jpg" />
	<Screenshot Value="Properties/Screenshots/after.jpg" />
	<!--Tag, can be set multiple times-->
	<Tag Value="Code Mod" />
	<!--Link to the forum post where the mod can be discussed-->
	<ForumLink Value="" />
	<!--Version of the mod-->
	<ModVersion Value="1.3.0" />
	<!--Recommended version of the base game to use the mod-->
	<GameVersion Value="1.3.*" />
	<!--Dependency for the mod, can be set multiple times-->
	<Dependency Id="" />
	<!--Required DLC, can be set multiple times. Supported values are "Landmark Buildings", "San Fransisco Set", "Beach Properties", "Urban Promenades", "Modern Architecture"-->
	<RequiredDLC Value="" />
	<!--Change log for new version. Single line or multi line. Supports minimal markdown subset-->
	<ChangeLog># 1.3.0 
* Performance: Batch process entity deletion
* Show cleanup progress indicator
	</ChangeLog>
	 
	<!--<ChangeLog>
	</ChangeLog>-->
	<!--External link, can be set multiple times. supported types are "discord", "github", "youtube", "twitch", "x", "paypal", "patreon", "buymeacoffee", "kofi", "crowdin", "gitlab", "gofundme"-->
	<ExternalLink Type="github" Url="https://github.com/phillycheeze/CitizenEntityCleaner" />
	<ExternalLink Type="discord" Url="https://discord.com/channels/1024242828114673724/1402078697120469064" />
</Publish>
